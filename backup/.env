# ------------------------------------------------------------------------
# KONFIGURASI DASAR SCRIPT
# ------------------------------------------------------------------------

# RTSP_SUBTYPE: 0 = main stream, 1 = sub stream, dsb.
# Digunakan oleh script untuk memilih sub-stream vs main-stream.
RTSP_SUBTYPE=0

# TEST_CHANNEL = "off" (default).
#   - "off" => script memproses semua channel 1..CHANNEL_COUNT.
#   - Contoh: "1,2" => hanya channel 1 dan 2 yang diproses.
TEST_CHANNEL=off

# CHANNEL_COUNT = jumlah total channel (bila TEST_CHANNEL=off).
# Contoh: 16 => channel 1..16 diproses.
CHANNEL_COUNT=16

# CHUNK_DURATION = durasi perekaman (detik) untuk mode FULL (rolling).
# BACKUP_MODE=full => tiap segmen video berdurasi CHUNK_DURATION.
CHUNK_DURATION=300

# ENABLE_JSON_LOOK = "true"/"false"
#   - true  => script mencoba membaca config (mis. channel_list) dari JSON.
#   - false => abaikan JSON, hanya pakai ENV.
ENABLE_JSON_LOOK=false


# ------------------------------------------------------------------------
# TWEAK KONFIGURASI PENGHEMATAN CPU (pipeline motion/object)
# ------------------------------------------------------------------------

# FRAME_SKIP = proses hanya 1 dari N frame (default 5).
#   - Makin besar => CPU lebih hemat, tapi gerakan sangat singkat bisa terlewat.
FRAME_SKIP=8

# DOWNSCALE_RATIO = rasio pengecilan resolusi sebelum motion/object detect.
#   - 0.4 => 40% dari ukuran asli => CPU lebih ringan, detail berkurang.
DOWNSCALE_RATIO=0.4

# MOTION_SLEEP = jeda (detik) antar loop di pipeline motion/object.
#   - Makin besar => FPS analisis turun => CPU lebih hemat,
#     tapi deteksi gerak sedikit lebih lambat.
MOTION_SLEEP=0.3

# FREEZE_BLACK_INTERVAL = interval (detik) untuk skip freeze/black check.
#   - 0 => cek di setiap putaran (perilaku lama).
#   - 1800 => cek hanya sekali tiap 30 menit per channel.
FREEZE_BLACK_INTERVAL=1800


# ------------------------------------------------------------------------
# MODE BACKUP DAN KONFIGURASI UMUM
# ------------------------------------------------------------------------

# BACKUP_MODE = {full|motion|motion_obj}
#   - full       => rekam terus (rolling CHUNK_DURATION).
#   - motion     => rekam hanya saat motion.
#   - motion_obj => rekam saat motion + object detection (mis. "person").
BACKUP_MODE=motion_obj

# MAX_RECORD = durasi max (detik) satu segmen rekaman di mode motion/motion_obj.
# Saat melebihi MAX_RECORD, script buat segmen baru.
MAX_RECORD=600

# MOTION_TIMEOUT = jeda tanpa gerakan sebelum script berhenti merekam (mode motion/motion_obj).
MOTION_TIMEOUT=10

# POST_MOTION_DELAY = jeda tambahan setelah gerakan hilang,
#   agar perekaman tidak berhenti terlalu cepat.
# Contoh: 10 => total idle = MOTION_TIMEOUT + 10.
POST_MOTION_DELAY=10

# ENABLE_FREEZE_CHECK = "true"/"false"
#   - true  => cek freeze frame (ffmpeg freezedetect).
#   - false => skip freeze-check.
ENABLE_FREEZE_CHECK=false

# ENABLE_BLACKOUT = "true"/"false"
#   - true  => cek black screen (ffmpeg blackdetect).
#   - false => skip black-check.
ENABLE_BLACKOUT=true

# LOOP_ENABLE = "true"/"false"
#   - true  => setelah semua channel selesai, tunggu CHECK_INTERVAL lalu ulangi (daemon).
#   - false => hanya satu putaran, lalu exit.
LOOP_ENABLE=true

# CHECK_INTERVAL = jeda (detik) sebelum loop pipeline berikutnya (jika LOOP_ENABLE=true).
CHECK_INTERVAL=300


# ------------------------------------------------------------------------
# PARAMETER FREEZE DETECT (JIKA ENABLE_FREEZE_CHECK=true)
# ------------------------------------------------------------------------

# FREEZE_SENSITIVITY = seberapa sensitif freeze detection (detik).
#   Contoh: 6.0 => jika frame tidak berubah 6 detik, dianggap freeze.
FREEZE_SENSITIVITY=6.0

# FREEZE_RECHECK_TIMES = berapa kali recheck freeze agar lebih yakin.
FREEZE_RECHECK_TIMES=5

# FREEZE_RECHECK_DELAY = jeda (detik) antar recheck freeze.
FREEZE_RECHECK_DELAY=3.0


# ------------------------------------------------------------------------
# PARAMETER OBJECT DETECTION (JIKA BACKUP_MODE=motion_obj)
# ------------------------------------------------------------------------
# CONF_PERSON=0.7 => threshold "person" (default 0.6).
# CONF_CAR=0.5    => threshold "car" (default 0.4).
# CONF_MOTOR=0.5  => threshold "motorbike" (default 0.4).

CONF_PERSON=0.7
CONF_CAR=0.5
CONF_MOTOR=0.5


# ------------------------------------------------------------------------
# PARAMETER MOTION DETECTION (OPSIONAL)
# ------------------------------------------------------------------------
# MOTION_HISTORY, MOTION_VARTH, MOTION_SHADOWS, MOTION_AREA_THRESHOLD
# default:
#   MOTION_HISTORY=500
#   MOTION_VARTH=16
#   MOTION_SHADOWS=true
#   MOTION_AREA_THRESHOLD=3000
#
# Contoh jika ingin tuning:
# MOTION_HISTORY=300
# MOTION_VARTH=20
# MOTION_SHADOWS=false
# MOTION_AREA_THRESHOLD=5000