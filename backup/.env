# ============================================================================
#  KONFIGURASI DASAR SCRIPT
# ============================================================================
# RTSP_SUBTYPE => menentukan apakah yang diakses adalah main-stream (0), sub-stream (1), dsb.
# Biasanya DVR/NVR meletakkan resolusi tinggi di "0" (main) dan resolusi rendah di "1" (sub).
RTSP_SUBTYPE=0

# TEST_CHANNEL => "off" berarti script akan memproses channel 1..CHANNEL_COUNT.
# Jika tidak "off", misal "1,2", maka hanya channel tersebut yang diproses.
TEST_CHANNEL=off

# CHANNEL_COUNT => jumlah channel (kamera) di DVR. Akan dipakai jika TEST_CHANNEL=off
CHANNEL_COUNT=16

# CHUNK_DURATION => durasi segmen perekaman (detik) jika mode perekaman "full".
CHUNK_DURATION=300

# ENABLE_JSON_LOOK => "true"/"false" (opsional).
# Misal jika script perlu loading config dari JSON di resource_monitor_state.json secara menyeluruh.
ENABLE_JSON_LOOK=false

# ============================================================================
#  TWEAK KONFIGURASI PENGHEMATAN CPU (pipeline motion/object)
# ============================================================================
# FRAME_SKIP => proses hanya 1 dari N frame (default 5). Makin besar => makin hemat CPU.
FRAME_SKIP=3

# DOWNSCALE_RATIO => mengecilkan resolusi sebelum analisis motion/object.
# 0.5 => resolusi setengah (50%). Makin kecil => makin hemat CPU.
DOWNSCALE_RATIO=0.5

# MOTION_SLEEP => jeda (detik) antar loop analisis motion/object.
# Makin besar => FPS analisis turun => CPU lebih hemat.
MOTION_SLEEP=0.2

# FREEZE_BLACK_INTERVAL => interval (detik) skip freeze/black check.
# 0 => cek setiap kali pipeline, 
# 1800 => cek 1x tiap 30 menit, dsb.
FREEZE_BLACK_INTERVAL=1800

# ============================================================================
#  MODE BACKUP DAN KONFIGURASI UMUM
# ============================================================================
# BACKUP_MODE => {full|motion|motion_obj|motion_dual|motion_obj_dual}.
# - full => merekam terus (rolling).
# - motion => merekam saat motion di stream utama.
# - motion_obj => motion + object detection (single-stream).
# - motion_dual => analisis motion sub-stream, rekam main-stream.
# - motion_obj_dual => analisis motion + object sub-stream, rekam main-stream.
BACKUP_MODE=motion_dual

# MAX_RECORD => durasi max (detik) per segmen rekaman mode motion/motion_obj.
MAX_RECORD=600

# MOTION_TIMEOUT => jeda (detik) tanpa gerakan sebelum berhenti merekam.
# (Naikkan jika ingin merekam lebih lama sesudah gerakan hilang.)
MOTION_TIMEOUT=20

# POST_MOTION_DELAY => jeda tambahan setelah gerakan hilang.
# Sehingga total idle = MOTION_TIMEOUT + POST_MOTION_DELAY.
POST_MOTION_DELAY=20

# ENABLE_BLACKOUT => "true" / "false". Apakah melakukan blackdetect?
ENABLE_BLACKOUT=true
# BLACK_DURATION => durasi minimal black screen yang terdeteksi (default 1 detik).
BLACK_DURATION=1
# BLACK_DETECT_THRESHOLD => ambang "kehitaman" (0..1). 0.98 => sangat gelap.
BLACK_DETECT_THRESHOLD=0.98

# LOOP_ENABLE => "true"/"false". Jika false => script hanya berjalan 1x.
LOOP_ENABLE=true

# CHECK_INTERVAL => jeda (detik) loop sebelum re-check pipeline (untuk mode motion/dualnya).
CHECK_INTERVAL=60

# RESTART_DELAY => jeda (detik) re-try channel jika fail open / black / freeze.
RESTART_DELAY=30

# FAIL_THRESHOLD => persentase channel gagal => memicu restart container (0..100).
FAIL_THRESHOLD=50

# ============================================================================
#  PARAMETER FREEZE DETECT (JIKA ENABLE_FREEZE_CHECK=true)
# ============================================================================
# ENABLE_FREEZE_CHECK => "true"/"false".
ENABLE_FREEZE_CHECK=false

# FREEZE_DURATION => durasi minimal freeze (detik).
FREEZE_DURATION=6.0
# FREEZE_SENSITIVITY, FREEZE_RECHECK_TIMES, FREEZE_RECHECK_DELAY => parameter loop freeze-check.
FREEZE_SENSITIVITY=6.0
FREEZE_RECHECK_TIMES=5
FREEZE_RECHECK_DELAY=3.0

# ============================================================================
#  PARAMETER OBJECT DETECTION (untuk motion_obj / motion_obj_dual)
# ============================================================================
# CONF_PERSON=0.5 => confidence minimal untuk mendeteksi orang (semakin tinggi => lebih ketat).
CONF_PERSON=0.5
CONF_CAR=0.3
CONF_MOTOR=0.3

# ============================================================================
#  PARAMETER MOTION DETECTION (opsional)
# ============================================================================
# MOTION_AREA_THRESHOLD => area minimal gerakan agar dianggap motion (hindari false alarm kecil).
MOTION_AREA_THRESHOLD=8000

# NIGHT_MODE_ENABLE => "true"/"false". Apakah ada penyesuaian khusus di malam hari?
NIGHT_MODE_ENABLE=true
NIGHT_START_HOUR=20
NIGHT_END_HOUR=7
NIGHT_AREA_THRESHOLD=5000
NIGHT_BLUR_ENABLE=true
NIGHT_BLUR_KERNEL=5

# Keterangan:
# - NIGHT_START_HOUR=20 => jam 20.00 (8 PM) dianggap malam, 
# - NIGHT_END_HOUR=7 => jam 7 pagi => siang.
# - NIGHT_AREA_THRESHOLD => threshold area gerakan khusus malam (lebih besar/kecil sesuai kebutuhan).
# - NIGHT_BLUR_ENABLE => "true"/"false" untuk menambahkan blur sebelum deteksi (kadang membantu menstabilkan noise).
# - NIGHT_BLUR_KERNEL=5 => ukuran kernel blur.


# ------------------- END OF .env EXAMPLE ---------------------------------